<html>
<head>
  <title>Consulta Dominio</title>
  <meta charset="utf-8">
  {% load static %}
  <link rel="shortcut icon" type="image/ico" href="{% static "favicon.ico" %}">
  <link rel="stylesheet" type="text/css" href="{% static "index.css" %}">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="{% static "index.js" %}"></script>
</head>
<body><center>

<!--  BARRA DE PESQUISA  -->
<div class=quadro>
  <p class=dominio_title>Consulta Domínio</p>
  <form action="{% url 'dominio:index' %}" method=post accept-charset="utf-8">
    {% csrf_token %}
    <input type=text name=dominio class=searchbox placeholder="Domínio FQDN" value="{{dominio}}" required>
    <input type=submit value="Consultar" class="botao">
    <select name=nserver class="botao">
        <!--<option value="8.8.8.8">Google DNS A</option>
        <option value="8.8.4.4">Google DNS B</option>
        <option value="200.98.199.199">ns1.dominios.uol.com.br</option>
        <option value="200.221.65.6">ns2.dominios.uol.com.br</option>
        <option value="4.2.2.1">4.2.2.1 (Level3)</option>
        <option value="4.2.2.2">4.2.2.2 (Level3)</option>
        <option value="208.67.222.222">208.67.222.222 (Level3)</option>
        <option value="4.2.2.2">208.67.220.220 (Level3)</option>-->
        <option value="8.8.8.8">DNS Externo</option>
        <option value="200.98.199.199">DNS Interno</option>
        <option value="">DNS Local</option>
    </select>
  </form>
</div><br>
<div class="teste">teste</div>
{% if dominio %}
<!--  DNS  -->

<table class=tabela>
  <th>DNS<th class=sinal>-</button></th>
    {% if dns %}
      {% for ns in dns %}
          <tr><td class=lowercase>{{ ns }}</td></tr>
      {% endfor %}
    {% else %}
          <tr><td class=noresult>Não foram encontrados DNS</td></tr>
    {% endif %}
</table><br>


<!--  ENDEREÇOS  -->
<table class=tabela>
  <th>Endereços<th class=sinal>-</th></th>
    {% if address %}
      {% for x in address %}
          <tr><td>{{ dominio }}&nbsp&nbsp&#10140&nbsp&nbsp{{ x }}&nbsp&nbsp</td></tr>
      {% endfor %}

      {% for x in www %}
          <tr><td>www.{{ dominio }}&nbsp&nbsp&#10140&nbsp&nbsp{{ x }}</td></tr>
      {% endfor %}

      {% for x in ftp %}
          <tr><td>ftp.{{ dominio }}&nbsp&nbsp&#10140&nbsp&nbsp{{ x }}</td></tr>
      {% endfor %}
</table><br>

<!--  TEMPO DE RESPOSTA  -->
<table class=tabela>
  <th>Tempo de Resposta<th class=sinal>-</th></th>
  <tr><td>
      <div id="site_info"></div>
        <center>
        <button class=botao_pequeno id="tresposta" site="{{ dominio }}">Obter Informações</button>
        <a href="http://{{ dominio }}" target="_blank">
        <button class=botao_pequeno id="acessar_site" style="display: none" target="_blank">
        Acessar Site
        </button>
        </a>
        </center>
  </td></tr>
  {% else %}
        <tr><td class=noresult>Não foram encontrados endereços</td></tr>
  {% endif %}
</table><br>

<!--  INFORMAÇÕES SOA  -->
<table class=tabela>
  <th>SOA<th class=sinal>-</th></th>
    {% if dns_soa %}
    <tr><td><b>Autoridade: </b>{{ dns_soa.autoridade }}</td></tr>
      <tr><td><b>Serial: </b>{{ dns_soa.serial }}</td></tr>
      <tr><td><b>Email: </b>{{ dns_soa.email }}</td></tr>
    {% else %}
        <tr><td class=noresult>Não foram encontrados SOA</td></tr>
    {% endif %}
</table><br>

<!--  SERVIDORES DE EMAIL  -->
<table class=tabela>
  <th>Servidores de E-mail<th class=sinal>-</th></th>
    {% if mail %}
      {% for server in mail %}
        <tr><td>{{ server }}</td></tr>
      {% endfor %}
    {% else %}
      <tr><td class=noresult>Não foram encontrados registros de E-mail (MX)</td></tr>
    {% endif %}
</table><br>

<table class=tabela>
  <th>SPF (Sender Policy Framework)<th class=sinal>-</th></th>
    {% if dns_txt %}
      <tr><td>{{ dns_txt }}</td></tr>
    {% else %}
      <tr><td class=noresult>Não foram encontrados registros de SPF</td></tr>
    {% endif %}
</table><br>

<!--  INFORMAÇÕES DOMINIO  -->
<table class=tabela>
  <th>Informações do Dominio<th class=sinal>-</th></th>
    {% if domain_expiration or domain_owner %}
      {% for date in domain_expiration %}
        <tr><td>{{ date }}</td></tr>
      {% endfor %}

      {% for owner in domain_owner %}
        <tr><td>{{ owner }}</td></tr>
      {% endfor %}
    {% else %}
        <tr><td class=noresult>Não foram encontradas informações sobre registro do domínio.</td></tr>
    {% endif %}
</table><br>
{% endif %}

</center>
</body>
</html>
